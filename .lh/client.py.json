{
    "sourceFile": "client.py",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 3,
            "patches": [
                {
                    "date": 1649326205468,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1649326747361,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,8 +1,27 @@\n+from re import M\n import time, struct, socket, sys, threading, Receiver, player\n \n mCastAddr = \"\"\n   \n+  \n+class GameHandler(threading.Thread):\n+    def __init__(self,m):\n+        self.mCastAddr = m\n+        self.gameState = 0\n+        self.timeToAnswer = 0\n+        self.mainSocket = socket.socket(socket.AF_INET6, socket.SOCK_DGRAM)\n+        self.mainPort = 30000\n+        self.buffer = 2048\n+    def run(self):\n+        self.mainSocket.bind(('', self.mainPort))\n+        while True:\n+            data,addr = self.mainSocket.recvfrom(self.buffer)\n+            if data\n+  \n+  \n+  \n+  \n def messageHandler(self,s, buffer):\n     global mCastAddr\n     while True:\n         data, addr = s.recvfrom(buffer)\n@@ -12,20 +31,26 @@\n             break\n         elif data.split('-')[0] == 'ready' and data.split('-')[1] == 'ack':\n             print(\"Ready ok!\")\n             break\n+        elif data.split('-')[0] == 'start' and data.split('-')[1] == 'ack':\n+            g = GameHandler(mCastAddr)\n+            g.start()            \n+        \n         else:\n             print(\"Unknown message!\")\n-            break    \n+            break\n     \n     \n     \n+    \n+    \n+    \n def main():\n     serverAddr = sys.argv[1]\n     controlPort = 8080\n     mainPort = 30000\n     controlSocket = socket.socket(socket.AF_INET6, socket.SOCK_DGRAM)\n-    mainSocket = socket.socket(socket.AF_INET6, socket.SOCK_DGRAM)\n     controlSocket = socket.bind('', controlPort)\n     mainSocket = socket.bind('b', mainPort)\n     buffer = 2048\n     \n@@ -34,6 +59,4 @@\n     messageHandler(controlSocket, buffer)\n     controlSocket.sendto(b'ready', (serverAddr, controlPort))\n     messageHandler(controlSocket, buffer)\n     \n-    while True:\n-        data = mainSocket.recvfrom(buffer)\n\\ No newline at end of file\n"
                },
                {
                    "date": 1649326768853,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -34,9 +34,9 @@\n             break\n         elif data.split('-')[0] == 'start' and data.split('-')[1] == 'ack':\n             g = GameHandler(mCastAddr)\n             g.start()            \n-        \n+            break\n         else:\n             print(\"Unknown message!\")\n             break\n     \n"
                },
                {
                    "date": 1649327968898,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -13,15 +13,15 @@\n         self.mainPort = 30000\n         self.buffer = 2048\n     def run(self):\n         self.mainSocket.bind(('', self.mainPort))\n-        while True:\n-            data,addr = self.mainSocket.recvfrom(self.buffer)\n-            if data\n+        rec = Receiver(mCastAddr,self.mainPort,self.mainSocket,self.buffer).start()\n+        res = rec.worker()\n+        if res == 1:\n+            self.mainSocket\n   \n   \n   \n-  \n def messageHandler(self,s, buffer):\n     global mCastAddr\n     while True:\n         data, addr = s.recvfrom(buffer)\n@@ -41,11 +41,8 @@\n             break\n     \n     \n     \n-    \n-    \n-    \n def main():\n     serverAddr = sys.argv[1]\n     controlPort = 8080\n     mainPort = 30000\n"
                }
            ],
            "date": 1649326205468,
            "name": "Commit-0",
            "content": "import time, struct, socket, sys, threading, Receiver, player\n\nmCastAddr = \"\"\n  \ndef messageHandler(self,s, buffer):\n    global mCastAddr\n    while True:\n        data, addr = s.recvfrom(buffer)\n        if data.split('-')[0] == 'hello' and data.split('-')[1] == 'ack':\n            print(\"Hello OK!\")\n            mCastAddr = data.split('-')[2]\n            break\n        elif data.split('-')[0] == 'ready' and data.split('-')[1] == 'ack':\n            print(\"Ready ok!\")\n            break\n        else:\n            print(\"Unknown message!\")\n            break    \n    \n    \n    \ndef main():\n    serverAddr = sys.argv[1]\n    controlPort = 8080\n    mainPort = 30000\n    controlSocket = socket.socket(socket.AF_INET6, socket.SOCK_DGRAM)\n    mainSocket = socket.socket(socket.AF_INET6, socket.SOCK_DGRAM)\n    controlSocket = socket.bind('', controlPort)\n    mainSocket = socket.bind('b', mainPort)\n    buffer = 2048\n    \n    \n    controlSocket.sendto(b'hello', (serverAddr, controlPort))\n    messageHandler(controlSocket, buffer)\n    controlSocket.sendto(b'ready', (serverAddr, controlPort))\n    messageHandler(controlSocket, buffer)\n    \n    while True:\n        data = mainSocket.recvfrom(buffer)"
        }
    ]
}